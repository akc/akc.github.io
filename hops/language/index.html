<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Anders Claesson" />
  <meta name="date" content="2015-12-12" />
  <title>The HOPS language</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../github-pandoc.css" type="text/css" />
</head>
<body>
<!--
<div id="header">
<h1 class="title">The HOPS language</h1>
<h2 class="author">Anders Claesson</h2>
<h3 class="date">12 December 2015</h3>
</div>
-->
<div align="right" style="text-size:80%; margin-bottom:-3.8em;">
<a href="/hops">HOME</a>
</div>
<h1 id="the-hops-language">The HOPS language</h1>
<p>Each line of a HOPS script is an independent program and each line/program consists of a semicolon separated list of functional equations and generating functions. We shall now describe operations, functions and transformations that can be used when building such programs.</p>
<h2 id="binary-operations">Binary operations</h2>
<table>
<thead>
<tr class="header">
<th align="left">Operation</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>f + g</code></td>
<td align="left">sum of <em>f</em> and <em>g</em></td>
</tr>
<tr class="even">
<td align="left"><code>f - g</code></td>
<td align="left">difference of <em>f</em> and <em>g</em></td>
</tr>
<tr class="odd">
<td align="left"><code>f ^ g</code></td>
<td align="left"><em>f</em> to the power <em>g</em></td>
</tr>
<tr class="even">
<td align="left"><code>f @ g</code></td>
<td align="left"><em>f</em> composed with <em>g</em> (can also be written <em>f(g)</em> when <em>f</em> is a name)</td>
</tr>
<tr class="odd">
<td align="left"><code>f * g</code></td>
<td align="left">product of <em>f</em> and <em>g</em></td>
</tr>
<tr class="even">
<td align="left"><code>f / g</code></td>
<td align="left">quotient of <em>f</em> and <em>g</em></td>
</tr>
<tr class="odd">
<td align="left"><code>f .* g</code></td>
<td align="left">coefficient-wise/Hadamard product of <em>f</em> and <em>g</em></td>
</tr>
<tr class="even">
<td align="left"><code>f ./ g</code></td>
<td align="left">coefficient-wise quotient of <em>f</em> and <em>g</em></td>
</tr>
</tbody>
</table>
<h2 id="derivative-and-integral">Derivative and integral</h2>
<table>
<thead>
<tr class="header">
<th align="left">Operation</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">D(f)</td>
<td align="left">derivative of <em>f</em></td>
</tr>
<tr class="even">
<td align="left">integral(f)</td>
<td align="left">integral of <em>f</em></td>
</tr>
</tbody>
</table>
<h2 id="functions">Functions</h2>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>sqrt(f)</code></td>
<td align="left"><code>f^(1/2)</code></td>
</tr>
<tr class="even">
<td align="left"><code>abs(f)</code></td>
<td align="left">coefficient-wise absolute value</td>
</tr>
<tr class="odd">
<td align="left"><code>log(f)</code></td>
<td align="left">logarithmic function</td>
</tr>
<tr class="even">
<td align="left"><code>exp(f)</code></td>
<td align="left">exponential function</td>
</tr>
<tr class="odd">
<td align="left"><code>sin(f)</code></td>
<td align="left">sine function</td>
</tr>
<tr class="even">
<td align="left"><code>cos(f)</code></td>
<td align="left">cosine function</td>
</tr>
<tr class="odd">
<td align="left"><code>tan(f)</code></td>
<td align="left">tangent function</td>
</tr>
<tr class="even">
<td align="left"><code>sec(f)</code></td>
<td align="left"><code>1/cos(f)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>arcsin(f)</code></td>
<td align="left">arcsine function</td>
</tr>
<tr class="even">
<td align="left"><code>arccos(f)</code></td>
<td align="left">arccosine function</td>
</tr>
<tr class="odd">
<td align="left"><code>arctan(f)</code></td>
<td align="left">arctangent function</td>
</tr>
<tr class="even">
<td align="left"><code>sinh(f)</code></td>
<td align="left">hyperbolic sine function</td>
</tr>
<tr class="odd">
<td align="left"><code>cosh(f)</code></td>
<td align="left">hyperbolic cosine function</td>
</tr>
<tr class="even">
<td align="left"><code>tanh(f)</code></td>
<td align="left">hyperbolic tangent function</td>
</tr>
<tr class="odd">
<td align="left"><code>arsinh(f)</code></td>
<td align="left">area hyperbolic sine function</td>
</tr>
<tr class="even">
<td align="left"><code>arcosh(f)</code></td>
<td align="left">area hyperbolic cosine function</td>
</tr>
<tr class="odd">
<td align="left"><code>artanh(f)</code></td>
<td align="left">area hyperbolic tangent function</td>
</tr>
<tr class="even">
<td align="left"><code>laplace(f)</code></td>
<td align="left"><code>f .* {n!}</code></td>
</tr>
<tr class="odd">
<td align="left"><code>laplacei(f)</code></td>
<td align="left"><code>f ./ {n!}</code></td>
</tr>
<tr class="even">
<td align="left"><code>revert(f)</code></td>
<td align="left">the compositional inverse of <em>f</em></td>
</tr>
</tbody>
</table>
<h2 id="transforms">Transforms</h2>
<table>
<thead>
<tr class="header">
<th align="left">Transform</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>AERATE1(f)</code></td>
<td align="left"><code>f(x^2)</code></td>
</tr>
<tr class="even">
<td align="left"><code>AERATE2(f)</code></td>
<td align="left"><code>f(x^3)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>BARRY1(f)</code></td>
<td align="left"><code>1/(1-x-x^2*f)</code></td>
</tr>
<tr class="even">
<td align="left"><code>BARRY2(f)</code></td>
<td align="left"><code>1/(1+x+x^2*f)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>BINOMIAL(f)</code></td>
<td align="left"><code>g=exp(x)*laplacei(f);laplace(g)</code></td>
</tr>
<tr class="even">
<td align="left"><code>BINOMIALi(f)</code></td>
<td align="left"><code>g=exp(-x)*laplacei(f);laplace(g)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>BIN1(f)</code></td>
<td align="left"><code>g={(-1)^n/n!}*((laplacei(x*f))@(-x));LEFT(laplace(-g))</code></td>
</tr>
<tr class="even">
<td align="left"><code>BISECT0(f)</code></td>
<td align="left">if <code>f={a0,a1,a2,a3,a4,...}</code> then <code>BISECT0(f)={a0,a2,a4,...}</code></td>
</tr>
<tr class="odd">
<td align="left"><code>BISECT1(f)</code></td>
<td align="left">if <code>f={a0,a1,a2,a3,a4,...}</code> then <code>BISECT1(f)={a1,a3,a5,...}</code></td>
</tr>
<tr class="even">
<td align="left"><code>BOUS2(f)</code></td>
<td align="left">See [<a href="https://oeis.org/transforms.txt">1</a>]</td>
</tr>
<tr class="odd">
<td align="left"><code>BOUS2i(f)</code></td>
<td align="left">See [<a href="https://oeis.org/transforms.txt">1</a>]</td>
</tr>
<tr class="even">
<td align="left"><code>BOUS(f)</code></td>
<td align="left">See [<a href="https://oeis.org/transforms.txt">1</a>]</td>
</tr>
<tr class="odd">
<td align="left"><code>CONV(f)</code></td>
<td align="left"><code>f^2</code></td>
</tr>
<tr class="even">
<td align="left"><code>CONVi(f)</code></td>
<td align="left"><code>sqrt(f)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>DIFF(f)</code></td>
<td align="left"><code>LEFT(f)-f</code></td>
</tr>
<tr class="even">
<td align="left"><code>EULER(f)</code></td>
<td align="left"><a href="http://mathworld.wolfram.com/EulerTransform.html">Euler transform</a></td>
</tr>
<tr class="odd">
<td align="left"><code>EULERi(f)</code></td>
<td align="left">inverse <a href="http://mathworld.wolfram.com/EulerTransform.html">Euler transform</a></td>
</tr>
<tr class="even">
<td align="left"><code>EXPCONV(f)</code></td>
<td align="left"><code>g=laplacei(f);laplace(g*g)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>EXP(f)</code></td>
<td align="left"><code>g={1/n!}@(laplacei(x*f));laplace(g-1)/x</code></td>
</tr>
<tr class="even">
<td align="left"><code>HANKEL(f)</code></td>
<td align="left"><a href="https://cs.uwaterloo.ca/journals/JIS/VOL4/LAYMAN/hankel.html">Hankel transform</a></td>
</tr>
<tr class="odd">
<td align="left"><code>lHANKEL(f)</code></td>
<td align="left"><code>g=f.*f-LEFT(f).*RIGHT(f);LEFT(g)</code></td>
</tr>
<tr class="even">
<td align="left"><code>INVERT(f)</code></td>
<td align="left"><code>LEFT(1/(1-x*f))</code></td>
</tr>
<tr class="odd">
<td align="left"><code>INVERTi(f)</code></td>
<td align="left"><code>LEFT(-1/(1+x*f))</code></td>
</tr>
<tr class="even">
<td align="left"><code>LAH(f)</code></td>
<td align="left"><code>g=(laplacei(f))@(x/(1-x));laplace(g)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>LAHi(f)</code></td>
<td align="left"><code>g=(laplacei(f))@(x/(1+x));laplace(g)</code></td>
</tr>
<tr class="even">
<td align="left"><code>LEFT(f)</code></td>
<td align="left">if <code>f={a0,a1,a2,a3,a4,...}</code> then <code>LEFT(f)={a1,a2,a3,...}</code></td>
</tr>
<tr class="odd">
<td align="left"><code>LOG(f)</code></td>
<td align="left"><code>g=log(1+laplacei(x*f));LEFT(laplace(g))</code></td>
</tr>
<tr class="even">
<td align="left"><code>M2(f)</code></td>
<td align="left"><code>2*f-f(0)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>M2i(f)</code></td>
<td align="left"><code>(f + f(0))/2</code></td>
</tr>
<tr class="even">
<td align="left"><code>MOBIUS(f)</code></td>
<td align="left">See [<a href="https://oeis.org/transforms.txt">1</a>]</td>
</tr>
<tr class="odd">
<td align="left"><code>MOBIUSi(f)</code></td>
<td align="left">See [<a href="https://oeis.org/transforms.txt">1</a>]</td>
</tr>
<tr class="even">
<td align="left"><code>NEGATE(f)</code></td>
<td align="left"><code>(1-x/(1-x)).*f</code></td>
</tr>
<tr class="odd">
<td align="left"><code>PARTITION(f)</code></td>
<td align="left">See [<a href="https://oeis.org/transforms.txt">1</a>]</td>
</tr>
<tr class="even">
<td align="left"><code>POINT(f)</code></td>
<td align="left"><code>laplace(x*D(laplacei(f)))</code></td>
</tr>
<tr class="odd">
<td align="left"><code>PRODS(f)</code></td>
<td align="left">if <code>f = {a0,a1,a2,...}</code> then <code>PRODS(f)={a0,a0*a1,a0*a1*a2,...}</code></td>
</tr>
<tr class="even">
<td align="left"><code>PSUM(f)</code></td>
<td align="left"><code>f/(1-x)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>PSUMSIGN(f)</code></td>
<td align="left"><code>f/(1+x)</code></td>
</tr>
<tr class="even">
<td align="left"><code>REVERT(f)</code></td>
<td align="left"><code>LEFT(revert(x*f))</code></td>
</tr>
<tr class="odd">
<td align="left"><code>REVEGF(f)</code></td>
<td align="left"><code>LEFT(laplace(revert((x*f)./(1+x*laplace(1/(1-x))))))</code></td>
</tr>
<tr class="even">
<td align="left"><code>RIGHT(f)</code></td>
<td align="left"><code>1+x*f</code></td>
</tr>
<tr class="odd">
<td align="left"><code>STIRLING(f)</code></td>
<td align="left"><code>g=laplacei(x*f);laplace(g@({0,1/n!}))/x</code></td>
</tr>
<tr class="even">
<td align="left"><code>STIRLINGi(f)</code></td>
<td align="left"><code>g=laplacei(x*f);laplace(g@({0,(-1)^(n+1)/n!}))/x</code></td>
</tr>
<tr class="odd">
<td align="left"><code>T019(f)</code></td>
<td align="left">if <code>f={a[n]}</code> then <code>{a[n+2]-2*a[n+1]+a[n]}</code></td>
</tr>
<tr class="even">
<td align="left"><code>TRISECT0(f)</code></td>
<td align="left">if <code>f={a0,a1,a2,a3,a4,...}</code> then <code>TRISECT0(f)={a0,a3,a6,...}</code></td>
</tr>
<tr class="odd">
<td align="left"><code>TRISECT1(f)</code></td>
<td align="left">if <code>f={a0,a1,a2,a3,a4,...}</code> then <code>TRISECT0(f)={a1,a4,a7,...}</code></td>
</tr>
<tr class="even">
<td align="left"><code>TRISECT2(f)</code></td>
<td align="left">if <code>f={a0,a1,a2,a3,a4,...}</code> then <code>TRISECT0(f)={a2,a5,a8,...}</code></td>
</tr>
<tr class="odd">
<td align="left"><code>WEIGHT(f)</code></td>
<td align="left">if <code>f={a0,a1,a2,...}</code> then <code>WEIGHT(f)=(1+x^n)^a0*(1+x^n)^a1*...</code></td>
</tr>
</tbody>
</table>
<p>[1] <a href="https://oeis.org/transforms.txt" class="uri">https://oeis.org/transforms.txt</a></p>
<h2 id="a-grammar-for-hops-scripts">A grammar for HOPS scripts</h2>
<p>A HOPS script is a list of independent programs (<code>prg</code>) - one program per line:</p>
<pre><code>hops = prg { &quot;\n&quot; prg }</code></pre>
<p>A program is a list of semicolon separated commands (<code>cmd</code>):</p>
<pre><code>prg = cmd { &quot;;&quot; cmd }</code></pre>
<p>A command is a generating function expression (<code>expr0</code>) or an assignment:</p>
<pre><code>cmd = expr0 | name &quot;=&quot; expr0</code></pre>
<p>We use the precedence climbing method to define generating function expressions:</p>
<pre><code>expr0 = expr0 (&quot;+&quot; | &quot;-&quot;) expr0 | expr1

expr1 = expr1 (&quot;*&quot; | &quot;/&quot; | &quot;.*&quot; | &quot;./&quot;) expr1 | expr2

expr2 = (&quot;-&quot; | &quot;+&quot;) expr2 | expr3 &quot;!&quot; | expr3 &quot;^&quot; expr3 | expr3 &quot;@&quot; expr3 | expr3

expr3 = &quot;x&quot; | anum | tag | name | lit | &quot;{&quot; { terms } &quot;}&quot; | name &quot;(&quot; expr3 &quot;)&quot; | expr0

lit = int

int = digit { digit }

digit = &quot;0&quot; | &quot;1&quot; | ... | &quot;9&quot;

alpha = &quot;A&quot; | &quot;B&quot; | ... | &quot;Z&quot; | &quot;a&quot; | &quot;b&quot; | ... | &quot;z&quot;

alphanum = alpha | digit

name = alphanum { alphanum | &quot;_&quot; }

terms = cexpr0 { &quot;,&quot; expr0 } (&quot;...&quot; | cexpr0 | fun)

fun = the same as cexpr0 except lit = linear

linear = int | int &quot;*n&quot;

cexpr0 = cexpr0 (&quot;+&quot; | &quot;-&quot;) cexpr0 | cexpr1

cexpr1 = cexpr1 (&quot;*&quot; | &quot;/&quot;) cexpr1 | cexpr2

cexpr2 = (&quot;+&quot; | &quot;-&quot;) cexpr2 | cexpr3 &quot;!&quot; | cexpr3 &quot;^&quot; cexpr3 | cexpr3

cexpr3 = lit | cexpr0</code></pre>

<footer>
Anders Claesson
- 12 December 2015
</footer>

</body>
</html>
